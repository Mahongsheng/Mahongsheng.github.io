(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{564:function(e,s,a){"use strict";a.r(s);var t=a(16),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"_1-克隆代码库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-克隆代码库"}},[e._v("#")]),e._v(" 1. 克隆代码库")]),e._v(" "),a("p",[e._v("首先，您需要将后端代码库克隆到你的电脑中：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/Mahongsheng/e-commerce.git\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("克隆完毕后，推荐使用IntelliJ IDEA打开本项目，打开后IDEA将会默认使用内置的Maven下载依赖并索引整个项目，耐心等待即可，如果太慢，可以修改Maven镜像源为国内地址。")]),e._v(" "),a("h2",{attrs:{id:"_2-搭建eureka-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-搭建eureka-server"}},[e._v("#")]),e._v(" 2. 搭建Eureka Server")]),e._v(" "),a("p",[e._v("Eureka Server提供服务注册服务，各个节点启动后，会在Eureka Server中进行注册，这样Eureka Server中的服务注册表中将会存储所有可用服务节点的信息，服务节点的信息可以在界面中直观的看到。")]),e._v(" "),a("p",[e._v("Eureka Server本身也是一个服务，默认情况下会自动注册到Eureka注册中心。")]),e._v(" "),a("p",[e._v("在此我们搭建单机版的Eureka Server，您可以使用我打包好的Jar包或者自行创建并打包Eureka Server（网上一大堆啦，Google下~）")]),e._v(" "),a("p",[e._v("Eureka Server Jar包百度网盘下载链接：https://pan.baidu.com/s/1PO7XO_DjewO4nhGzGWGCSA\n提取码：fm1t")]),e._v(" "),a("p",[e._v("下载完毕后，您可以选择在自己的云服务器上部署，也可以选择在本机部署：")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("不使用Docker：直接"),a("code",[e._v("java -jar eureka-server.jar")]),e._v("，运行后会暴露8761端口；")])]),e._v(" "),a("li",[a("p",[e._v("使用Docker：创建Dockerfile并将"),a("code",[e._v("eureka-server.jar")]),e._v("放到和Dockerfile同级别目录下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("FROM java:8\nVOLUME /eureka-server\nADD eureka-server-1.0.jar eureka-server.jar\nENTRYPOINT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"java"')]),e._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"-Djava.security.egd=file:/dev/./urandom"')]),e._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"-jar"')]),e._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/eureka-server.jar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("创建完毕后，运行：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker build -t eureka-server-image "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" \n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("此时Docker会自动创建"),a("code",[e._v("eureka-server-image")]),e._v("镜像，再运行：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8761")]),e._v(":8761 eureka-server-image\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("此时会运行该镜像，生成容器并暴露8761端口。")])])]),e._v(" "),a("p",[a("font",{attrs:{color:"red"}},[e._v("注意：")]),e._v("在此我们需要关注Eureka的IP地址和端口，之后在配置文件中会用到。")],1),e._v(" "),a("h2",{attrs:{id:"_3-搭建mysql数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-搭建mysql数据库"}},[e._v("#")]),e._v(" 3. 搭建MySQL数据库")]),e._v(" "),a("p",[e._v("在本项目中，我们直接在阿里云上购买了云数据库MySQL，由于账号与密码不方便透露，因此在此您需要自行搭建MySQL数据库。")]),e._v(" "),a("p",[e._v("在项目目录"),a("code",[e._v("others")]),e._v("文件夹中，我们已经提供了SQL文件，您只需要导入到自己的MySQL数据库即可，注意MySQL数据库的版本应为8以上。")]),e._v(" "),a("h2",{attrs:{id:"_4-搭建redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-搭建redis"}},[e._v("#")]),e._v(" 4. 搭建Redis")]),e._v(" "),a("p",[e._v("在本项目，同上我们也在阿里云上购买了云缓存Redis，在此可以将地址与密码告知大家，但其将于2022年中下旬过期，因此我们还是推荐您使用自己的Redis，在后期配置中心的讲解中，我们会直接使用云缓存Redis。")]),e._v(" "),a("p",[e._v("搭建Redis是比较简单的，本项目中主要在登录界面的验证码处使用Redis存储以达到验证码过期的效果。")]),e._v(" "),a("h2",{attrs:{id:"_5-创建配置文件仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-创建配置文件仓库"}},[e._v("#")]),e._v(" 5. 创建配置文件仓库")]),e._v(" "),a("p",[e._v("在e-commerce项目中，我们使用到了统一的配置中心，您可以通过这个"),a("a",{attrs:{href:"https://www.cnblogs.com/fengzheng/p/11242128.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("博客"),a("OutboundLink")],1),e._v("来进行了解，配置文件仓库的目录结构如图所示：")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://imgtu.com/i/TyBjln",target:"_blank",rel:"noopener noreferrer"}},[a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://s4.ax1x.com/2021/12/28/TyBjln.png",alt:"TyBjln.png"}}),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("您需要在github或gitee（推荐）等平台创建仓库，并存放统一的配置文件，这样就达到了将配置与项目代码分隔的作用。")]),e._v(" "),a("p",[e._v("搭建完毕配置文件仓库后，您必须修改"),a("code",[e._v("e-commerce-config-server")]),e._v("模块中的"),a("code",[e._v("application.yaml")]),e._v("文件：")]),e._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8888")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("eureka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("serviceUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("register-with-eureka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("fetch-registry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("defaultZone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//106.13.127.90"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("8761/eureka "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 修改为你的Eureka Server地址")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("instance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("preferIpAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("instance-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("spring.cloud.client.ip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("server.port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("commerce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("server  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 应用名称")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("git")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//gitee.com/xxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#配置文件所在仓库")]),e._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("default-label")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" master "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 配置文件分支")]),e._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("search-paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" config "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 配置文件所在根目录")]),e._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" xxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 用户名")]),e._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" xxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 密码")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br")])]),a("p",[e._v("这样，修改完上述文件后，您可以运行"),a("code",[e._v("e-commerce-config-server")]),e._v("并在浏览器中输入"),a("code",[e._v("http://localhost:8888/master/e-commerce-admin-dev.yaml")]),e._v("，如果出现以下结果，则表示配置文件仓库搭建完成：")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://imgtu.com/i/TyBvyq",target:"_blank",rel:"noopener noreferrer"}},[a("img",{staticStyle:{zoom:"60%"},attrs:{src:"https://s4.ax1x.com/2021/12/28/TyBvyq.png",alt:"TyBvyq.png"}}),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"_6-运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-运行"}},[e._v("#")]),e._v(" 6. 运行！")]),e._v(" "),a("p",[e._v("请注意运行顺序：")]),e._v(" "),a("ol",[a("li",[e._v("请先启动配置中心"),a("code",[e._v("e-commerce-config-server")]),e._v("；")]),e._v(" "),a("li",[e._v("在所有微服务模块中，请先启动"),a("code",[e._v("e-commerce-admin")]),e._v("，这个模块为登录、权限验证模块，少了它验证码刷不出来登录不进去系统；")]),e._v(" "),a("li",[e._v("接下来随意运行其他微服务模块吧~")]),e._v(" "),a("li",[e._v("运行前端项目观察效果吧~\n"),a("ol",[a("li",[a("code",[e._v("npm install --registry=https://registry.npm.taobao.org")]),e._v("这样install可以保证使用国内镜像，肥肠快啦")]),e._v(" "),a("li",[a("code",[e._v("npm run dev")]),e._v("跑起来！")])])]),e._v(" "),a("li",[e._v("用户名和密码：\n"),a("ul",[a("li",[e._v("admin string")]),e._v(" "),a("li",[e._v("bvo string")]),e._v(" "),a("li",[e._v("mvo string")])])])]),e._v(" "),a("h2",{attrs:{id:"_7-项目打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-项目打包"}},[e._v("#")]),e._v(" 7. 项目打包")]),e._v(" "),a("p",[e._v("在观察项目结构的过程中，您可能会发现，模块之间是有引用的，比如"),a("code",[e._v("e-commerce-mybatis")]),e._v("模块作为数据库连接层，被所有其他微服务模块所引用，因此打包时需要注意先后顺序：")]),e._v(" "),a("ol",[a("li",[e._v("请先打包"),a("code",[e._v("e-commerce-common")]),e._v("模块，运行"),a("code",[e._v("mvn clean")]),e._v("与"),a("code",[e._v("mvn install")]),e._v("，install是为了将该jar包存入本地仓库，否则打包其他模块时如果用到了该模块，会显示找不到~")]),e._v(" "),a("li",[e._v("先后打包"),a("code",[e._v("e-commerce-mybatis")]),e._v("、"),a("code",[e._v("e-commerce-redis")]),e._v("、"),a("code",[e._v("e-commerce-security")]),e._v("，方式同1，必须用"),a("code",[e._v("mvn install")]),e._v("；")]),e._v(" "),a("li",[e._v("接着直接打包各个微服务模块就好了~运行"),a("code",[e._v("mvn clean")]),e._v("与"),a("code",[e._v("mvn package")]),e._v("，这里不需要install，原因同1；")])]),e._v(" "),a("p",[e._v("打包好后，我们就可以看到target下的jar包了~冲冲冲~")]),e._v(" "),a("h2",{attrs:{id:"_8-使用docker部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-使用docker部署"}},[e._v("#")]),e._v(" 8. 使用Docker部署")]),e._v(" "),a("p",[e._v("细心的您一定发现每个微服务模块下都有一个Dockerfile，没错我们期望使用Docker部署这几个微服务模块（不使用Docker的话，如果您只有一台虚拟机或者低性能云服务，担心跑不起来或速度太慢）")]),e._v(" "),a("p",[e._v("在创建Docker镜像之前一定确保对项目打包完毕，否则莫得jar包。")]),e._v(" "),a("p",[e._v("同搭建Eureka Server时使用Docker的步骤，在Dockerfile同级目录打开终端，运行：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker build -t e-commerce-admin "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n\ndocker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9010")]),e._v(":9010 e-commerce-admin\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("您也可以直接使用我已经上传到Dockerhub上的镜像：")]),e._v(" "),a("ul",[a("li",[e._v("masirr/e-commerce-config-server")]),e._v(" "),a("li",[e._v("masirr/e-commerce-admin")]),e._v(" "),a("li",[e._v("masirr/e-commerce-basicinfo")]),e._v(" "),a("li",[e._v("masirr/e-commerce-order")]),e._v(" "),a("li",[e._v("masirr/e-commerce-product")]),e._v(" "),a("li",[e._v("masirr/e-commerce-wallet")])]),e._v(" "),a("p",[e._v("有问题？欢迎在Github提Issue或给我发邮件噢。")])])}),[],!1,null,null,null);s.default=r.exports}}]);