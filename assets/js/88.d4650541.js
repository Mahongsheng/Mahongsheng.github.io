(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{518:function(s,e,a){"use strict";a.r(e);var t=a(16),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git配置-多用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git配置-多用户"}},[s._v("#")]),s._v(" Git配置-多用户")]),s._v(" "),a("p",[s._v("一般来说，我们都是通过全局设置用户名和邮箱来绑定唯一的Git账号信息，如下面的命令所示：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mahongsheng"')]),s._v(" // 配置全局用户名，如 Github 上注册的用户名\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.email "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mahhss@foxmail.com"')]),s._v(" // 配置全局邮箱，如 Github 上配置的邮箱\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("但是你可能会碰到需要在一台电脑上配置多个用户信息的需求。此时就不能够用一个全局配置搞定一切了。")]),s._v(" "),a("p",[s._v("比如你可能同时使用Github、Gitee、Gitlab等等，这些仓库不仅仓库地址不一样，仓库的用户名和邮箱都不一样。")]),s._v(" "),a("p",[s._v("本文将配置分别是 github 以及 gitee上的两个用户，并分别在它们所属的项目上进行 git 操作，这差不多就是配置多用户的大部分操作了。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th"),s._v(" "),a("th",[s._v("Github")]),s._v(" "),a("th",[s._v("Gitee")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("用户名")]),s._v(" "),a("td",[s._v("Mahongsheng")]),s._v(" "),a("td",[s._v("Ma_洪升")])]),s._v(" "),a("tr",[a("td",[s._v("邮箱")]),s._v(" "),a("td",[s._v("mahongsheng_cs@163.com")]),s._v(" "),a("td",[s._v("mahhss@foxmail.com")])])])]),s._v(" "),a("h2",{attrs:{id:"_1-清除全局配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-清除全局配置"}},[s._v("#")]),s._v(" 1. 清除全局配置")]),s._v(" "),a("p",[s._v("在正式配置之前，我们先得把全局配置给清除掉（如果你配置过的话），执行命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这会列出所有已经配置的全局配置，如果你发现其中有 "),a("code",[s._v("user.name")]),s._v(" 和 "),a("code",[s._v("user.email")]),s._v(" 信息，请执行以下命令将其清除掉：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset user.name\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset user.email\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_2-生成钥对"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成钥对"}},[s._v("#")]),s._v(" 2. 生成钥对")]),s._v(" "),a("p",[s._v("钥对的保存位置默认在 "),a("code",[s._v("~/.ssh")]),s._v(" 目录下，我们先清理下这个目录中已存在的钥对信息，即删除其中的 "),a("code",[s._v("id_rsa")]),s._v("、"),a("code",[s._v("id_rsa.pub")]),s._v(" 之类的公钥和密钥文件。")]),s._v(" "),a("p",[s._v("首先我们开始生成 github 上的仓库钥对，通过 "),a("code",[s._v("-C")]),s._v(" 参数填写 github 的邮箱：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ssh-keygen -t rsa -C "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mahongsheng_cs@163.com"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("按下 ENTER 键后，会有如下提示：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Generatingpublic/privatersa key pair.Enter fileinwhich to save the key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/Users/jitwxs/.ssh/id_rsa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在这里输入公钥的名字，默认情况是叫 "),a("code",[s._v("id_rsa")]),s._v("，为了和后面的 gitlab 配置区分，这里输入 "),a("code",[s._v("id_rsa_github")]),s._v("。输入完毕后，一路回车，钥对就生成完毕了。")]),s._v(" "),a("p",[s._v("下面开始生成 gitee 上的仓库钥对，步骤和上面一样：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ssh-keygen -t rsa -C "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mahhss@foxmail.com"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("生成的公钥名就叫做："),a("code",[s._v("id_rsa_gitee")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgtu.com/i/ICMspD",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://z3.ax1x.com/2021/11/01/ICMspD.png",alt:"ICMspD.png"}}),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_3-添加-ssh-keys"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加-ssh-keys"}},[s._v("#")]),s._v(" 3. 添加 SSH Keys")]),s._v(" "),a("p",[s._v("我相信你既然都看到这篇文章了，你一定掌握了如何将公钥添加到 SSH Keys 中。请将 id_rsa_github.pub 和 id_rsa_gitee.pub 内容分别添加到 github 和 gitee 的 SSH Keys 中，这里不再赘述。")]),s._v(" "),a("h2",{attrs:{id:"_4-添加私钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加私钥"}},[s._v("#")]),s._v(" 4. 添加私钥")]),s._v(" "),a("p",[s._v("在上一步中，我们已经将公钥添加到了 github 或者 gitlab 服务器上，我们还需要将私钥添加到本地中，不然无法使用。添加命令也十分简单，如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ssh-add ~/.ssh/id_rsa_github // 将 GitHub 私钥添加到本地\nssh-add ~/.ssh/id_rsa_gitee // 将 Gitee 私钥添加到本地\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：执行ssh-add时，可能会报错："),a("code",[s._v("Could not open a connection to your authentication agent")]),s._v("，此时应执行"),a("code",[s._v("ssh-agent bash")]),s._v("，ssh-agent是一个代理，该命令会启动ssh-agent在内存中保存这些私钥。")])]),s._v(" "),a("p",[s._v("添加完毕后，可以通过执行 "),a("code",[s._v("ssh-add -l")]),s._v(" 验证下，如果都能显示出来和下面一样，就 OK 了。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" ~  ssh-add -l\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" SHA256:mXVNxWHZsZpKOnHlPslF2jXAWR+jc7M6P5hYbrCo jitwxs@foxmail.com "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RSA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" SHA256:Blhp3+Hx5mp9HDivFjDuwc/PaQ8ux45TRa6nTsfIe0PEz4 lemon@test.com "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RSA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_5-管理密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-管理密钥"}},[s._v("#")]),s._v(" 5. 管理密钥")]),s._v(" "),a("p",[s._v("通过以上步骤，公钥、密钥分别被添加到 git 服务器和本地了。下面我们需要在本地创建一个密钥配置文件，通过该文件，实现根据仓库的 remote 链接地址自动选择合适的私钥。")]),s._v(" "),a("p",[s._v("编辑 "),a("code",[s._v("~/.ssh")]),s._v(" 目录下的 "),a("code",[s._v("config")]),s._v(" 文件，如果没有，请创建。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Host github\nHostName github.com\nUser Mahongsheng\nIdentityFile ~/.ssh/id_rsa_github\n\nHost gitee\nHostName gitee.com\nUser Ma_洪升\nIdentityFile ~/.ssh/id_rsa_gitee\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("该文件分为多个用户配置，每个用户配置包含以下几个配置项：")]),s._v(" "),a("ul",[a("li",[s._v("Host：仓库网站的别名，随意取")]),s._v(" "),a("li",[s._v("HostName：仓库网站的域名（PS：IP 地址应该也可以）")]),s._v(" "),a("li",[s._v("User：仓库网站上的用户名")]),s._v(" "),a("li",[s._v("IdentityFile：私钥的绝对路径")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意： Host 就是可以替代 HostName 来使用的别名，比如github可以代替github.com")])]),s._v(" "),a("p",[s._v("接下来，可以用 "),a("code",[s._v("ssh -T")]),s._v(" 命令检测下配置的 Host 是否是连通的：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("~/.ssh  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -T git@github\nHi Mahongsheng"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" You've successfully authenticated, but GitHub does not provide shell access.\n~/.ssh  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -T git@gitee\nWelcome to Gitee, Ma_洪升"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：进行git push时可能会报错："),a("code",[s._v("The authenticity of host 'gitee.com (212.64.62.183)' can't be established.")]),s._v("，这是因为.ssh文件夹内少了一个known_hosts文件，本来密钥文件应该是三个，现在只有两个，便报了这样的错误，此时根据提示输入yes回车之后，生成了缺少了的known_hosts文件，便可解决这个问题："),a("code",[s._v("Are you sure you want to continue connecting (yes/no)? yes")])])]),s._v(" "),a("h2",{attrs:{id:"_6-仓库配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-仓库配置"}},[s._v("#")]),s._v(" 6. 仓库配置")]),s._v(" "),a("p",[s._v("恭喜你！完成以上配置后，其实你已经基本完成了所有配置。分别进入附属于 github 和 gitee的仓库，此时都可以进行 git 操作了。但是别急，如果你此时提交仓库修改后，你会发现提交的用户名变成了你的系统主机名。")]),s._v(" "),a("p",[s._v("这是因为 git 的配置分为三级别，System —> Global —>Local。System 即系统级别，Global 为配置的全局，Local 为仓库级别，优先级是 Local > Global > System。")]),s._v(" "),a("p",[s._v("因为我们并没有给仓库配置用户名，又在一开始清除了全局的用户名，因此此时你提交的话，就会使用 System 级别的用户名，也就是你的系统主机名了。")]),s._v(" "),a("p",[s._v("因此我们需要为每个仓库单独配置用户名信息，假设我们要配置 github 的某个仓库，进入该仓库后，执行：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local user.name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mahongsheng"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local user.email "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mahongsheng_cs@163.com"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("执行完毕后，通过以下命令查看本仓库的所有配置信息：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --local --list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("至此你已经配置好了 Local 级别的配置了，此时提交该仓库的代码，提交用户名就是你设置的 Local 级别的用户名了。")]),s._v(" "),a("p",[a("strong",[s._v("Reference:")]),s._v(" "),a("a",{attrs:{href:"https://blog.csdn.net/yuanlaijike/article/details/95650625",target:"_blank",rel:"noopener noreferrer"}},[s._v("巨人的肩膀"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);